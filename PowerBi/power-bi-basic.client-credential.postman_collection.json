{
	"info": {
		"_postman_id": "34b53295-c81f-4e26-9dc9-b86ea38ce25a",
		"name": "PBI",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "710407"
	},
	"item": [
		{
			"name": "Get Datasets in Group",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://api.powerbi.com/v1.0/myorg/groups/:groupid/datasets/",
					"protocol": "https",
					"host": [
						"api",
						"powerbi",
						"com"
					],
					"path": [
						"v1.0",
						"myorg",
						"groups",
						":groupid",
						"datasets",
						""
					],
					"variable": [
						{
							"key": "groupid",
							"value": "2e1db0c3-95dc-48d0-a0bb-8fa2a1a62cfb"
						}
					]
				}
			},
			"response": [
				{
					"name": "Get Datasets in Group",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://api.powerbi.com/v1.0/myorg/groups/:groupid/datasets/",
							"protocol": "https",
							"host": [
								"api",
								"powerbi",
								"com"
							],
							"path": [
								"v1.0",
								"myorg",
								"groups",
								":groupid",
								"datasets",
								""
							],
							"variable": [
								{
									"key": "groupid",
									"value": "2e1db0c3-95dc-48d0-a0bb-8fa2a1a62cfb"
								}
							]
						}
					},
					"_postman_previewlanguage": null,
					"header": null,
					"cookie": [],
					"body": null
				}
			]
		},
		{
			"name": "Execute Queries in Group",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Response contains results with tables having rows\", function () {",
							"    const jsonData = pm.response.json();",
							"    ",
							"    pm.expect(jsonData).to.have.property(\"results\");",
							"    pm.expect(jsonData.results).to.be.an(\"array\").that.is.not.empty;",
							"    ",
							"    jsonData.results.forEach((result, resultIndex) => {",
							"        pm.expect(result).to.have.property(\"tables\");",
							"        pm.expect(result.tables).to.be.an(\"array\").that.is.not.empty;",
							"        ",
							"        result.tables.forEach((table, tableIndex) => {",
							"            pm.expect(table).to.have.property(\"rows\");",
							"            pm.expect(table.rows.length, `Result ${resultIndex}, Table ${tableIndex} should have rows`).to.be.greaterThan(0);",
							"        });",
							"    });",
							"});",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"queries\": [\r\n    {\r\n      \"query\": \"EVALUATE Filter(INFO.View.COLUMNS(), [IsHidden]=FALSE())\"\r\n    }\r\n  ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.powerbi.com/v1.0/myorg/groups/:groupid/datasets/:datasetid/executequeries",
					"protocol": "https",
					"host": [
						"api",
						"powerbi",
						"com"
					],
					"path": [
						"v1.0",
						"myorg",
						"groups",
						":groupid",
						"datasets",
						":datasetid",
						"executequeries"
					],
					"variable": [
						{
							"key": "groupid",
							"value": "2e1db0c3-95dc-48d0-a0bb-8fa2a1a62cfb"
						},
						{
							"key": "datasetid",
							"value": "27c02a01-d46c-479b-a5f5-32b5c0110112"
						}
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "oauth2",
		"oauth2": [
			{
				"key": "tokenRequestParams",
				"value": [
					{
						"key": "resource",
						"value": "https://analysis.windows.net/powerbi/api",
						"enabled": true,
						"send_as": "request_body"
					}
				],
				"type": "any"
			},
			{
				"key": "client_authentication",
				"value": "body",
				"type": "string"
			},
			{
				"key": "clientSecret",
				"value": "{{client_secret}}",
				"type": "string"
			},
			{
				"key": "clientId",
				"value": "{{client_id}}",
				"type": "string"
			},
			{
				"key": "accessTokenUrl",
				"value": "https://login.microsoftonline.com/{{tenant_id}}/oauth2/token",
				"type": "string"
			},
			{
				"key": "grant_type",
				"value": "client_credentials",
				"type": "string"
			},
			{
				"key": "tokenName",
				"value": "pbi",
				"type": "string"
			},
			{
				"key": "addTokenTo",
				"value": "header",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "client_id",
			"value": ""
		},
		{
			"key": "client_secret",
			"value": ""
		},
		{
			"key": "tenant_id",
			"value": ""
		}
	]
}